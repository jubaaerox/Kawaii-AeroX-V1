<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kawaii - Login</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #050810 0%, #0f1419 50%, #0a0f1a 100%);
      color: #f0f4f8;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .login-container {
      width: 100%;
      max-width: 420px;
    }

    .login-card {
      background: linear-gradient(135deg, rgba(21, 29, 45, 0.6), rgba(21, 29, 45, 0.3));
      border: 1px solid #2d3b52;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(10px);
    }

    .logo-section {
      text-align: center;
      margin-bottom: 32px;
    }

    .logo-icon {
      width: 64px;
      height: 64px;
      border-radius: 16px;
      margin: 0 auto 20px;
      object-fit: cover;
      display: block;
    }

    .logo-section h1 {
      font-size: 32px;
      font-weight: 800;
      margin-bottom: 8px;
      background: linear-gradient(135deg, #696cff, #7c7eff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .logo-section p {
      font-size: 15px;
      color: #a0afc0;
      line-height: 1.5;
    }

    .btn-discord {
      width: 100%;
      padding: 16px 24px;
      background: #5865F2;
      color: white;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-top: 24px;
      text-decoration: none;
    }

    .btn-discord:hover {
      background: #4752C4;
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(88, 101, 242, 0.4);
    }

    .btn-discord:active {
      transform: translateY(0);
    }

    .btn-discord svg {
      width: 24px;
      height: 24px;
    }

    .error-message {
      display: none;
      background: rgba(255, 62, 29, 0.1);
      border: 1px solid rgba(255, 62, 29, 0.3);
      border-radius: 10px;
      padding: 14px 16px;
      margin-bottom: 20px;
      color: #ff3e1d;
      font-size: 14px;
      text-align: center;
    }

    .error-message.show {
      display: block;
    }

    .features {
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid #2d3b52;
    }

    .features-title {
      font-size: 12px;
      font-weight: 600;
      color: #6b7d93;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 16px;
      text-align: center;
    }

    .features-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .feature-item {
      display: flex;
      align-items: center;
      gap: 12px;
      color: #a0afc0;
      font-size: 14px;
    }

    .feature-icon {
      width: 32px;
      height: 32px;
      background: rgba(105, 108, 255, 0.1);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .feature-icon svg {
      width: 16px;
      height: 16px;
      fill: #696cff;
    }

    .footer-link {
      text-align: center;
      margin-top: 24px;
      font-size: 13px;
      color: #6b7d93;
    }

    .footer-link a {
      color: #696cff;
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s ease;
    }

    .footer-link a:hover {
      color: #7c7eff;
    }

    @media (max-width: 640px) {
      body {
        padding: 16px;
      }

      .login-card {
        padding: 28px;
        border-radius: 12px;
      }

      .logo-icon {
        width: 56px;
        height: 56px;
        margin-bottom: 16px;
      }

      .logo-section h1 {
        font-size: 26px;
      }

      .logo-section p {
        font-size: 14px;
      }

      .btn-discord {
        padding: 14px 20px;
        font-size: 15px;
      }

      .features {
        margin-top: 24px;
        padding-top: 20px;
      }

      .feature-item {
        font-size: 13px;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 12px;
      }

      .login-container {
        max-width: 100%;
      }

      .login-card {
        padding: 20px;
        border-radius: 10px;
      }

      .logo-icon {
        width: 48px;
        height: 48px;
        margin-bottom: 14px;
      }

      .logo-section h1 {
        font-size: 22px;
      }

      .logo-section p {
        font-size: 13px;
      }

      .btn-discord {
        padding: 12px 16px;
        font-size: 14px;
        border-radius: 10px;
      }

      .btn-discord svg {
        width: 20px;
        height: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="login-container">
    <div class="login-card">
      <div class="logo-section">
        <img src="/logo.png" alt="Kawaii Logo" class="logo-icon">
        <h1>Kawaii</h1>
        <p>Login with Discord to configure logging for your servers</p>
      </div>

      <div class="error-message" id="errorMsg"></div>

      <a href="/auth/discord" class="btn-discord">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
        </svg>
        Login with Discord
      </a>

      <div class="features">
        <div class="features-title">What you'll get</div>
        <div class="features-list">
          <div class="feature-item">
            <div class="feature-icon">
              <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            </div>
            <span>Configure servers where you're an admin</span>
          </div>
          <div class="feature-item">
            <div class="feature-icon">
              <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
            </div>
            <span>Comprehensive event logging</span>
          </div>
          <div class="feature-item">
            <div class="feature-icon">
              <svg viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
            </div>
            <span>Secure Discord OAuth authentication</span>
          </div>
        </div>
      </div>

      <div class="footer-link">
        <a href="/">Back to Home</a>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const urlParams = new URLSearchParams(window.location.search);
      const error = urlParams.get('error');
      const errorDiv = document.getElementById('errorMsg');
      
      if (error) {
        let message = 'Login failed. Please try again.';
        if (error === 'discord_denied') {
          message = 'You cancelled the Discord login. Please try again.';
        } else if (error === 'no_code') {
          message = 'No authorization code received. Please try again.';
        } else if (error === 'oauth_failed') {
          message = 'OAuth authentication failed. Please try again.';
        }
        errorDiv.textContent = message;
        errorDiv.classList.add('show');
      }
      
      const cookies = document.cookie.split(';');
      for (let cookie of cookies) {
        const [name, value] = cookie.trim().split('=');
        if (name === 'auth' && value) {
          window.location.href = '/servers';
          return;
        }
      }
    });
  </script>
</body>
</html>
